# Monolithic vs Microservices & Load Balancing (AWS Interview Notes)

---

## Topic: Monolithic vs. Microservices Architecture

---

### 1. Monolithic Architecture

#### Definition
A **Monolithic application** is built as a **single, unified unit**, where:
- All components (UI, business logic, database access) are tightly coupled
- Code is packaged and deployed together as one large application

#### Characteristics
- Single codebase
- Single deployment unit
- All modules depend on each other

#### Advantages
- Simple to develop and deploy at the **initial stage**
- Easier debugging in early development
- Less operational complexity

#### Disadvantages
- Difficult to scale (entire application must scale together)
- Small change requires **full redeployment**
- Single point of failure â€” if one component fails, the whole app can go down
- Slower innovation as application grows

#### Best Fit
- Small applications
- Startups in early stages
- Low traffic systems

---

### 2. Microservices Architecture

#### Definition
**Microservices architecture** breaks a large application into **small, independent services**, where:
- Each service runs in its **own process**
- Services communicate via APIs (HTTP/REST, messaging, etc.)
- Each service can be developed, deployed, and scaled independently

#### Characteristics
- Decentralized architecture
- Independent deployments
- Loosely coupled services

#### Advantages
- Highly scalable and flexible
- Faster development and deployments
- Failure isolation â€” one service failure does not crash the entire system
- Technology freedom (different services can use different tech stacks)

#### Disadvantages (Cons)
- Increased operational complexity
- Requires service discovery, monitoring, logging
- Networking overhead
- Needs strong DevOps practices

#### Best Fit
- Large-scale applications
- Cloud-native systems
- High traffic and high availability workloads

---

## Topic: Load Balancer (LB)

---

### Definition
A **Load Balancer** is a managed service that:
- Automatically distributes incoming application traffic
- Routes requests across multiple backend targets (e.g., EC2 instances)

#### Primary Objectives
- Increase **availability**
- Improve **scalability**
- Provide **fault tolerance**

#### Core Role
Acts as a **traffic controller**, ensuring:
- No single instance is overloaded
- Failed instances are removed from traffic flow automatically

---

## Types of AWS Load Balancers

---

### 1. Classic Load Balancer (CLB)
- Oldest and **legacy** load balancer
- Uses basic round-robin routing
- Limited features
- Not recommended for new architectures

---

### 2. Gateway Load Balancer (GLB)
- Specialized load balancer
- Used for deploying and scaling **virtual appliances**
  - Firewalls
  - Intrusion Detection / Prevention Systems
- Operates transparently at network level

---

### 3. Application Load Balancer (ALB)
- Works at **Layer 7 (Application Layer)**
- Ideal for modern web applications and microservices

---

### 4. Network Load Balancer (NLB)
- Works at **Layer 4 (Transport Layer)**
- Designed for extreme performance and low latency

---

## Topic: ALB vs NLB (Very Important Interview Question)

| Feature | ALB (Application Load Balancer) | NLB (Network Load Balancer) |
|------|----------------------------------|-----------------------------|
| **OSI Layer** | Layer 7 (Application) | Layer 4 (Transport) |
| **Traffic Type** | HTTP / HTTPS | TCP, TLS, UDP |
| **Request Inspection** | Inspects headers, paths, hostnames | Only IP & Port |
| **Latency** | Slightly higher (due to content inspection) | Ultra-low latency |
| **Routing** | Path-based, Host-based routing | IP & Port-based routing only |
| **Use Cases** | Web apps, APIs, Microservices | Gaming, trading, real-time systems |
| **Static IP** | âŒ Not supported | âœ… Static IP per AZ |
| **Security** | Integrates with AWS WAF | Controlled via SG & NACL |

---

### Interview Shortcut ðŸ§ 
> **ALB understands the request. NLB only forwards it.**

---

## Topic: Core Components of a Load Balancer

---

### 1. Target Group

#### Definition
A **Target Group** is a logical grouping of backend resources that receive traffic from the load balancer.

#### Key Points
- Defines:
  - Target type (EC2, IP, Lambda)
  - Protocol (HTTP, HTTPS, TCP)
  - Port number
- Health checks are configured here

---

### 2. Listener

#### Definition
A **Listener** checks for incoming connection requests from clients.

#### Example
- HTTP â†’ Port 80
- HTTPS â†’ Port 443

#### Role
- Evaluates incoming traffic
- Forwards requests to the appropriate target group based on rules

---

### 3. Health Check

#### Definition
A **Health Check** is an automated mechanism used by the load balancer to:
- Periodically test backend targets
- Determine whether a target is healthy or unhealthy

#### Behavior
- Healthy target â†’ Receives traffic
- Unhealthy target â†’ Traffic is stopped automatically

---

## Architecture Mapping (Important Insight)

- **Monolithic Apps** â†’ Usually work with CLB or ALB
- **Microservices** â†’ Best paired with ALB
- **Ultra-low latency systems** â†’ NLB

---

## Interview One-Liners ðŸŽ¯

- *Monolithic scales as a whole; Microservices scale independently.*
- *ALB is content-aware; NLB is performance-focused.*
- *Health checks protect users from failed instances automatically.*

---


## Path-Based Routing using ALB

Architecture Overview

/           â†’ Home Target Group
/mobile/*   â†’ Mobile Target Group
/laptop/*   â†’ Laptop Target Group


---

Step 1: Launch EC2 Instances

Instance Plan

Total Instances: 6

Groups: home (2), mobile (2), laptop (2)

AMI: Amazon Linux

Ports: 22 (SSH), 80 (HTTP)


---

User Data Scripts

A. Home Page

#!/bin/bash
yum update -y
yum install httpd -y
systemctl start httpd
systemctl enable httpd
echo "<h1>This is my HOME page - $HOSTNAME</h1>" > /var/www/html/index.html

B. Mobile Page

#!/bin/bash
yum update -y
yum install httpd -y
mkdir -p /var/www/html/mobile
systemctl start httpd
systemctl enable httpd
echo "<h1>This is my MOBILE page - $HOSTNAME</h1>" > /var/www/html/mobile/index.html

C. Laptop Page

#!/bin/bash
yum update -y
yum install httpd -y
mkdir -p /var/www/html/laptop
systemctl start httpd
systemctl enable httpd
echo "<h1>This is my LAPTOP page - $HOSTNAME</h1>" > /var/www/html/laptop/index.html


---

Step 2: Create Target Groups

Create three target groups:

Target Group	Health Check Path

tg-home	/index.html
tg-mobile	/mobile/index.html
tg-laptop	/laptop/index.html

Steps

EC2 â†’ Target Groups â†’ Create

Target Type: Instance

Protocol: HTTP, Port: 80

Register respective EC2 instances


---

Step 3: Create Application Load Balancer

Configuration

Type: Application Load Balancer

Scheme: Internet-facing

Listener: HTTP (80)

Default Target Group: tg-home

AZs: Select all available


---

Step 4: Configure Path-Based Routing Rules

Rule 1: Mobile

Condition: /mobile/*

Action: Forward â†’ tg-mobile

Priority: 10

Rule 2: Laptop

Condition: /laptop/*

Action: Forward â†’ tg-laptop

Priority: 20


---

Step 5: Verification

1. Copy ALB DNS Name


2. Test in browser:



http://<ALB-DNS>/
http://<ALB-DNS>/mobile/
http://<ALB-DNS>/laptop/

Each path should route to its respective EC2 group.


---

Step 6: Cleanup (Important)

To avoid unnecessary billing:

Delete Listener Rules

Delete Target Groups

Delete Load Balancer

Terminate EC2 Instances


---

Interview Takeaways

ALB supports Layer 7 intelligent routing

Path-based routing is ideal for microservices

Health checks ensure self-healing architecture

ALB is tightly integrated with Auto Scaling & WAF