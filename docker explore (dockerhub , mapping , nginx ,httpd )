ğŸŒ Docker Practical Flow â€“ NGINX & HTTPD 

> This document demonstrates container lifecycle, port mapping (80 vs random), index.html editing, container IP access, cleanup, push/pull, and save/load â€” exactly how interviewers expect you to explain Docker networking.


ğŸ§  
> Running NGINX and HTTPD containers helps validate Docker networking, port exposure, container isolation, and image lifecycle.

---

ğŸ§± High-Level Flow 

Pull Image
 â†’ Run Container
 â†’ Expose Port
 â†’ Modify index.html
 â†’ Access via Browser & Curl
 â†’ Inspect IP
 â†’ Cleanup Containers
 â†’ Push / Pull Image
 â†’ Save / Load Image


---
create instance install docker and verify docker installed after that :

ğŸ”¹ STEP 1: Run NGINX on Port 80 (Fixed Port)

docker run -d --name demonginx -p 80:80 nginx

Explanation

-d â†’ Detached mode (background)

--name demonginx â†’ Friendly container name

-p 80:80 â†’ Host port 80 mapped to container port 80

nginx â†’ Image name


ğŸ“Œ 
> Port mapping allows external traffic to reach services running inside containers.




---

ğŸ”¹ STEP 2: Run HTTPD on Random Port

docker run -d --name demohttp -P httpd

Explanation

-P â†’ Maps container ports to random host ports

Random ports are allocated between 32768â€“61000


ğŸ“Œ 

> -P is useful when you donâ€™t care about a fixed port and want Docker to auto-assign.




---

ğŸ”¹ STEP 3: Verify Running Containers

docker ps

âœ” Shows container ID, image, ports, and status


---

ğŸ”¹ STEP 4: Modify NGINX index.html

docker exec -it demonginx bash

Inside container:

cat > /usr/share/nginx/html/index.html
Hello World from NGINX

Press CTRL + D to save and exit.

ğŸ“Œ 

> docker exec is used to access a running container without restarting it.




---

ğŸ”¹ STEP 5: Modify HTTPD index.html

docker exec -it demohttp bash

Inside container:

cat > /usr/local/apache2/htdocs/index.html
Hello World from HTTPD

Press CTRL + D.


---

ğŸ”¹ STEP 6: Find Container IP Address

docker inspect demonginx | grep IPAddress

ğŸ“Œ Meaning:

Shows internal container IP

Used when container is not exposed via port mapping



---

ğŸ”¹ STEP 7: Access Application (Browser & Curl)

ğŸ”¸ NGINX (Port 80)

http://localhost

ğŸ”¸ HTTPD (Random Port)

First check port:

docker ps

Then open:

http://localhost:<random_port>

Or via curl:

curl http://localhost:<random_port>


---

âš ï¸ Important Interview Note (Isolation Concept)

> If you do not use -p or -P, the container is isolated.



Can we access it from internet?

âŒ NO

Can we access it internally?

âœ… YES, using:

curl http://<container_ip>:80

ğŸ“Œ Interview-ready line:

> Without port mapping, Docker containers are only accessible within the Docker network.




---

ğŸ§¹ STEP 8: Cleanup Containers (Professional Way)

List all container IDs

docker ps -a -q

Remove all containers forcefully

docker rm -f $(docker ps -aq)

ğŸ“Œ Interview tip:

> Commonly used during cleanup in test or lab environments.




---

ğŸ“¥ STEP 9: Pull Images Explicitly

docker pull nginx
docker pull httpd

ğŸ“Œ Meaning:

Downloads latest images from Docker Hub

Does not start containers



---

ğŸ“¦ STEP 10: Commit Container as New Image

docker commit demonginx mydockerhubuser/demonginx:v1

ğŸ“Œ Meaning:

Saves container state as a new image

Includes modified index.html


ğŸ“Œ Interview warning:

> docker commit is not recommended for CI/CD; Dockerfile is preferred.




---

ğŸ“¤ STEP 11: Push Image to Docker Hub

docker push mydockerhubuser/demonginx:v1

ğŸ“Œ Requirement:

docker login


---

ğŸ“¥ STEP 12: Pull Custom Image from Docker Hub

docker pull mydockerhubuser/demonginx:v1


---

â–¶ STEP 13: Run Custom Image

docker run -d -p 8080:80 mydockerhubuser/demonginx:v1

Access:

http://localhost:8080


---

ğŸ’¾ STEP 14: Save Image to TAR File

docker save -o demonginx.tar mydockerhubuser/demonginx:v1

ğŸ“Œ Use case:

Offline transfer

Air-gapped environments



---

ğŸ“‚ STEP 15: Load Image from TAR File

docker load -i demonginx.tar

ğŸ“Œ Interview line:

> docker save/load is used when Docker Hub or internet is unavailable.




---


âš¡ Quick Interview Q&A 


---

Q1. Difference between -p and -P?

ğŸ‘‰ -p = manual port mapping
ğŸ‘‰ -P = automatic random port mapping


---

Q2. Can a container be accessed without port mapping?

ğŸ‘‰ No, not from browser or internet
ğŸ‘‰ Yes, only internally using container IP


---

Q3. docker commit vs Dockerfile?

ğŸ‘‰ docker commit = manual snapshot
ğŸ‘‰ Dockerfile = repeatable, automated, recommended


---

Q4. save/load vs push/pull?

ğŸ‘‰ save/load = offline transfer
ğŸ‘‰ push/pull = requires Docker Hub or registry


---

Q5. What happens internally when you run docker run?

ğŸ‘‰ Docker checks image
ğŸ‘‰ Pulls image if missing
ğŸ‘‰ Creates container
ğŸ‘‰ Sets network & filesystem
ğŸ‘‰ Starts container

ğŸ“Œ Interview line:

> docker run = docker pull + docker create + docker start




---

Q6. Why does Docker use random ports (32768â€“61000)?

ğŸ‘‰ To avoid conflict with system and well-known ports
ğŸ‘‰ Allows safe automatic port allocation


---

Q7. How does Docker networking work by default?

ğŸ‘‰ Containers connect to a bridge network
ğŸ‘‰ Each container gets a private IP
ğŸ‘‰ NAT is used for external access


---

Q8. Why canâ€™t we access a container without -p or -P?

ğŸ‘‰ Because the container is inside Dockerâ€™s private network
ğŸ‘‰ No port is exposed to the host


---

Q9. Difference between EXPOSE and -p?

ğŸ‘‰ EXPOSE = documentation only
ğŸ‘‰ -p = actually opens the port

ğŸ“Œ Very common interview question


---

Q10. What happens if two containers use the same host port?

ğŸ‘‰ Docker throws a port conflict error
ğŸ‘‰ Second container will not start


---

Q11. When do you use docker inspect?

ğŸ‘‰ To check:

Container IP

Port mapping

Environment variables

Volumes
ğŸ‘‰ Used mainly for debugging



---

Q12. Is docker commit used in production?

ğŸ‘‰ No
ğŸ‘‰ Dockerfile is preferred for automation and version control


---

Q13. Difference between docker stop and docker kill?

ğŸ‘‰ stop = graceful shutdown (SIGTERM)
ğŸ‘‰ kill = force stop (SIGKILL)


---

Q14. What is a dangling image?

ğŸ‘‰ Image with no tag
ğŸ‘‰ Not used by any container


---

Q15. How do you move Docker images without internet?

ğŸ‘‰ Using:

docker save

docker load



---

Q16. What is the security risk of exposing port 80?

ğŸ‘‰ Service becomes publicly accessible
ğŸ‘‰ Needs firewall, security groups, or reverse proxy


---

Q17. How does Docker provide lightweight isolation?

ğŸ‘‰ Uses Linux namespaces
ğŸ‘‰ Uses cgroups
ğŸ‘‰ No full OS virtualization


---

Q18. Container IP vs Host IP?

ğŸ‘‰ Container IP = internal Docker network
ğŸ‘‰ Host IP = reachable from outside


---

Q19. How do containers talk to each other?

ğŸ‘‰ Using Docker networks
ğŸ‘‰ Via container name or container IP


___